<app xmlns="http://bender.igel.co.jp" xmlns:html="http://www.w3.org/1999/xhtml">
  <title>A simple button implemented with updates</title>
  <stylesheet>
    .button { display: inline-block; cursor: default; border: solid thin black;
      padding: 4px; background-color: #ddd; }
    .button.down { opacity: 0.5; }
  </stylesheet>

  <update>
    <get view="b" dom-event="mousedown"/>
    <get view="b" dom-event="touchstart"/>
    <set view="b">
      flexo.add_class(view, "down");
    </set>
    <update once="true">
      <get view="b" dom-event="mouseup"/>
      <get view="b" dom-event="touchend"/>
      <set view="b">
        flexo.remove_class(view, "down");
        setTimeout(function() { alert("!!!"); }, 0);
      </set>
    </update>
    <update once="true">
      <get view="b" dom-event="mouseout"/>
      <get view="b" dom-event="touchcancel"/>
      <set view="b">
        flexo.remove_class(view, "down");
      </set>
    </update>
  </update>

  <view>
    <html:p>Click this button:
      <html:div class="button" id="b">OK</html:div>
    </html:p>
  </view>
</app>
