<app xmlns="http://bender.igel.co.jp" xmlns:f="http://bender.igel.co.jp/f"
  xmlns:svg="http://www.w3.org/2000/svg">
  <title>SVG Button component test</title>

  <component id="svg-button">
    <view>
      <svg:rect id="rect" width="100" height="100" fill="#08f"/>
    </view>
    <watch>
      <get view="rect" dom-event="mousedown"/>
      <get view="rect" dom-event="touchstart"/>
      <set>
        this.views.rect.setAttribute("fill", "#f80");
      </set>
      <watch>
        <get view="rect" dom-event="mouseup"/>
        <get view="rect" dom-event="touchend"/>
        <set>
          this.views.rect.setAttribute("fill", "#08f");
          setTimeout((function() { bender.notify(this, "@pushed") }).bind(this),
            0);
          flexo.log(value);
        </set>
      </watch>
      <watch>
        <get view="rect" dom-event="mouseout"/>
        <get view="rect" dom-event="touchcancel"/>
        <set>
          this.views.rect.setAttribute("fill", "#08f");
        </set>
      </watch>
    </watch>
  </component>

  <view>
    <component ref="svg-button" id="button"/>
  </view>

  <watch>
    <get view="button" event="@pushed">
      alert("button was pushed!");
    </get>
  </watch>

</app>
