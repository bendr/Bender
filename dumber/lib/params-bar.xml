<component xmlns="http://dumber.igel.co.jp"
  xmlns:html="http://www.w3.org/1999/xhtml">
  <view>
    <target q="head" once="true">
      <html:style>
        .params-bar { background-color: black; color: white; padding: 4px; }
        .params-bar input { border: none; background-color: #ffd; }
        .params-bar input[type=number] { width: 4em; }
        .params-bar label { margin: 0 4px; }
        .params-bar a { display: inline-block; text-align: right;
          color: #ff4040; text-decoration: none; float: right; margin: 4px; }
      </html:style>
    </target>
    <html:div class="params-bar">
      ‚öê
      <html:span/>
      <html:a href="../index.html">Home</html:a>
    </html:div>
  </view>
  <script>
    var div = this.querySelector("span");
    this._prototype.add_param = function(type, name, value)
    {
      var c;
      if (type === "b") {
        c = this.component._components.template_b.cloneNode(true);
      } else {
        c = this.component._components.template.cloneNode(true);
        c.querySelector("input").setAttribute("type",
          type === "e" ? "text" : "number");
      }
      c.setAttribute("id", name);
      c.querySelector("span")._textContent(name);
      c.querySelectorAll("set")[0].setAttribute("property", name);
      c.querySelectorAll("get")[1].setAttribute("property", name);
      this.component.appendChild(c);
      div.appendChild(div.$("use", { ref: name }));
      this.properties[name] = value;
    };
    this._prototype.clear = function() { flexo.remove_children(div); };
  </script>

  <component id="template">
    <view>
      <html:label><html:span/>: <html:input id="input"/></html:label>
    </view>
    <watch>
      <get view="input" event="change">
        return this.views.input.value;
      </get>
      <set use="$parent"/>
    </watch>
    <watch>
      <get use="$parent"/>
      <set view="input" property="value"/>
    </watch>
  </component>

  <component id="template_b">
    <view>
      <html:label><html:input id="input" type="checkbox"/>
        <html:span/></html:label>
    </view>
    <watch>
      <get view="input" event="change">
        return this.views.input.checked;
      </get>
      <set use="$parent"/>
    </watch>
    <watch>
      <get use="$parent"/>
      <set view="input" property="checked"/>
    </watch>
  </component>

</component>
