<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bender | Reference</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="bender.css">
    <script src="../core/flexo.js"></script>
    <script src="../core/bender.js"></script>
    <script src="doc.js"></script>
  </head>
  <body>
    <h1>Bender | Reference</h1>

    <p class="TODO">This is a work in progress and is very incomplete at the
    moment. Thank you for your interest! Please <a
    href="mailto:bender@igel.co.jp">contact us</a> for comments, questions,
    etc.</p>

    <nav id="toc">
      <h2>Table of Contents</h2>
    </nav>

    <section id="running">
      <h2>Running a Bender application</h2>
      <p>To run an HTML application, point your browser to:</p>
      <pre class="code">$BENDER_HOME/core/bender.html?app=$RELATIVE_PATH</pre>
      <p>where <code>$RELATIVE_PATH</code> is the path to the description file
      of the application that you wish to run (on the same server as Bender),
      relative to <code>$BENDER_HOME</code>. You may specify additional
      arguments that are passed to the application in the <code>args</code>
      object (see below); the following are default arguments:</p>
      <ul>
        <li><code>app</code>: the path to the application description
        file;</li>
        <li><code>path</code>: the base path for files (defaults to
        <code>../</code> since the launcher application is in the
        <code>core/</code> directory);</li>
        <li><code>suffix</code>: the suffix for application files (defaults to
        <code>.xml</code>);</li>
        <li><code>dest</code>: the <code>id</code> attribute of the destination
        element for rendering. If no such element is found, then the document
        body is used.</li>
        <li><code>debug</code>: the debug level for messages; must be a
        positive integer (0 for no debug message.)</li>
      </ul>
    </section>

    <section id="elements">
      <h2>Bender Elements</h2>

      <p>Bender elements are in the namespace</p>
      <pre class="code">http://bender.igel.co.jp</pre>

      <section id="elements.app">
        <h3><span class="elem">app</span></h3>
        <p>The top-level element for an application is <span
          class="elem">app</span>.</p>
        <div class="include-src" data-src="../core/tests/empty.xml">An empty
          application</div>
        <div class="include-src" data-src="../core/tests/hello.xml">Hello,
          World!</div>
      </section>

      <section id="elements.component">
        <h3><span class="elem">component</span></h3>

        <p>If appearing as the top-level element of a document or with an
        <code>id</code> parameter within an application or component, then it
        is a component definition. Otherwise, this is a component
        instanciation.</p>

        <section id="elements.component.definition">
          <h4>Component definition</h4>
        </section>

        <section id="elements.component.instanciation">
          <h4>Component instanciation</h4>
        </section>

        <section id="elements.component.parameters">
          <h4>Component parameters</h4>

          <!--

          <p>Components can be parametrized in different ways. By parameter, we
          mean properties of its controllers, which can be set in the following
          manner:</p>
          <ol>
            <li>in the <code>init</code> method of the controller;</li>
            <li>as parameters in the <code>e</code> and <code>f</code>
            namespaces of the <span class="elem">controller</span>
            element (when instatiating a controller) <span class="TODO">see the
              timer example</span>;</li>
            <li>as parameters in the <code>e</code> and <code>f</code>
            namespaces of the <span class="elem">component</span> element (when
            instantiating a component.)</li>
          </ol>
          <p>Initializations are done in that order so that values can be
          successively overridden. A component view can then then reference
          parameters; attribute strings of the form <code>{<em>x</em>}</code>
          which, at instantiation time, get replaced with the value of the
          property <code><em>x</em></code> of the default controller of the
          component.</p>
          <p>When a template value is used but there is no corresponding value,
          the attribute is ignored. This is useful for optional attributes,
          when no default value is provided.</p>

          </p>In the example below, a component called <code>circle</code> is
          defined. Its parameters (<code>cx</code>, <code>cy</code>,
          <code>r</code>, <code>fill</code> and <code>opacity</code>) define how
          it is rendered as an SVG circle. These parameters are set randomly in
          the <code>init</code> method of the default controller. Further down
          in the application, three instances are created; the first one has two
          default parameters setting the center of the first circle to the
          center of the view box, while the third one has a stroke attribute
          which is only rendered for that particular instance since the other
          two have no <code>stroke</code> property.</p>
          <div class="include-src" data-suffix="svg"
            data-src="../core/tests/component-params.xml">Component
            parameters</div>

          <p>In the example below, we see that we can access and modify
          component parameters through code as well. Any change to a value
          bound to a node attribute is reflected in the node. Clicking on a
          circle will change its color by modifying the <code>fill</code>
          parameter of the component.</p>
          <div class="include-src" data-suffix="svg"
            data-src="../core/tests/set-param.xml">Set component
            parameter</div>
          <p class="TODO">Better specify these bindings.</p>
          -->

        </section>

        <section id="elements.component.instanciation">
          <h4>Component instanciation</h4>
        </section>
      </section>

      <section id="elements.content">
        <h3><span class="elem">content</span></h3>
        <p>Appears within the view of a component. This is a slot that will
        receive the content of a component instanciation node. A component may
        provide default content which is used if the instanciation node does
        not have content.</p>
        <p>A component may contain several content nodes; in that case, each
        node must have an <code>id</code> attribute. The instanciation node can
        then specify which content slot it refers to with a matching
        <code>ref</code> attribute.</p>
        <div class="include-src"
          data-src="../core/tests/content-id.xml">Content with id</div>
        <div class="include-src"
          data-src="../core/tests/label-button.xml">Component with two
          different content nodes and default content</div>
      </section>

      <section id="elements.controller">
        <h3><span class="elem">controller</span></h3>
        <p>Define a controller associated to a given application or component.
        The main controller has no <code>id</code> attribute; other controllers
        must have an <code>id</code> attribute to distinguish them from the
        main controller. In the absence of a <span
          class="elem">controller</span> node, the enclosing <span
          class="elem">app</span> or <span class="elem">component</span> node
        will act as the main controller node.</p>
        <p>A controller node is backed by a controller delegate object. By
        default this is an object created from the
        <code>bender.controller</code> prototype; a different prototype name
        can be specified by the <code>instance-of</code> attribute.</p>
      </section>

      <section id="elements.listen">
        <h3><span class="elem">listen</span></h3>
        <p>Specify a listener for a Bender event (using the <code>event</code>
        attribute; normally, the event type starts with @, <em>e.g.</em>,
        <code>event="@ready"</code>) or a DOM event (using the
        <code>dom-event</code> attribute, <em>e.g.</em>,
        <code>dom-event="mousedown"</code>.) A <code>source</code> attribute
        specifies the id of the component or DOM node that is listened to;
        if absent, it is main controller of the component (for Bender events)
        or the document (for DOM events.)</p>
        <div class="include-src"
          data-src="../core/tests/dom-event.xml">Listen to a DOM event</div>
      </section>

      <section id="elements.stylesheet">
        <h3><span class="elem">stylesheet</span></h3>
        <p>Style a component or application with CSS, either inline or with an
        external stylesheet at the URI given by the <code>href</code>
        attribute. Stylesheets are added in inclusion order and cascading rules
        apply.</p>
        <div class="include-src"
          data-src="../core/tests/stylesheet.xml">Inline stylesheet</div>
        <div class="include-src"
          data-src="../core/tests/stylesheet-href.xml">External stylesheet
          (<code>href</code> attribute)</div>
      </section>

      <section id="elements.title">
        <h3><span class="elem">title</span></h3>
        <p>A metadata element to give a title to an application, a component, a
        controller, a view, etc.</p>
        <div class="include-src" data-src="../core/tests/metadata.xml">An
          application with title and language metadata</div>
        <p class="TODO"><code>xml:lang</code> is not implemented yet at the
        application or component level.</p>
      </section>

      <section id="elements.update">
        <h3><span class="elem">update</span></h3>
        <p>An element governing the update of values throughout a component.</p>
        <div class="include-src" data-src="../core/tests/update-1.xml">Updating
          a view when a value changes.</div>
      </section>

      <section id="elements.view">
        <h3><span class="elem">view</span></h3>
        <p>This is the root element for the view of an application or a
        component.</p>
      </section>

    </section>

    <section id="library">
      <h2>Components Library</h2>

      <section id="library.button">
        <h3>Button</h3>
        <div class="include-src" data-src="../lib/button.xml">Button
          library component</div>
      </section>

      <section id="library.check">
        <h3>Check</h3>
        <div class="include-src" data-src="../lib/check.xml">Checkbox
          library component</div>
      </section>

      <section id="library.integer">
        <h3>Integer box</h3>
        <div class="include-src" data-src="../lib/integer.xml">Integer box
          library component</div>
      </section>

      <section id="library.label">
        <h3>Label</h3>
        <div class="include-src" data-src="../lib/label.xml">Label
          library component</div>
      </section>

      <section id="library.led">
        <h3>LED</h3>
        <div class="include-src" data-src="../lib/label.xml">LED
          library component</div>
      </section>

    </section>

    <section id="js-library">
      <h2>Javascript library</h2>

      <section id="js-library.flexo">
        <h3>Flexo</h3>
        <p>The support library <code>core/flexo.js</code>, with all non-Bender
        specific code.</p>
      </section>

      <section id="js-library.bender">
        <h3>Bender</h3>
        <p>The main Javascript library <code>core/bender.js</code>, implementing the
        runtime and providing prototypes for Bender objects.</p>
      </section>

      <section id="js-library.controllers">
        <h3>Controllers</h3>
        <p>A library of controller delegates (timer, <span
          class="TODO">selection manager, clipboard manager, command
          manager</span>, etc.)</p>
      </section>

    </section>

    <section id="uncategorized">
      <h2>Uncategorized Examples</h2>
      <div class="include-src" data-src="../core/tests/alert.xml">Alert on
        @ready event</div>
      <div class="include-src"
        data-src="../core/tests/component-href.xml">Including a component with
        href</div>
      <div class="include-src"
        data-src="../core/tests/component-include.xml">Including a
        component</div>
      <div class="include-src"
        data-src="../core/tests/component-inline.xml">Inline component</div>
      <div class="include-src"
        data-src="../core/tests/component-multiple.xml">Multiple
        components</div>
      <div class="include-src"
        data-src="../core/tests/content-id.xml">Content with id</div>
      <div class="include-src"
        data-src="../core/tests/dom-event.xml">DOM event</div>
      <div class="include-src"
        data-src="../core/tests/hello-include.xml">Including an app</div>
      <div class="include-src"
        data-src="../core/tests/instance-of.xml">instance-of attribute for
        controller</div>
      <div class="include-src" data-suffix="svg"
        data-src="../core/tests/hello-svg.xml">Hello, world in SVG</div>
      <div class="include-src"
        data-src="../core/tests/local-script.xml">Local script</div>
      <div class="include-src"
        data-src="../core/tests/update-1.xml">Updating a view on a value
        change</div>
      <div class="include-src"
        data-src="../core/tests/update-2.xml">Updating two views on a value
        change with a transform function</div>

      <section id="uncategorized.broken">
        <h3>Broken</h3>
        <div class="include-src" data-suffix="svg"
          data-src="../core/tests/drag.xml">Draggable component</div>
        <div class="include-src"
          data-src="../core/tests/integer.xml">Integer box component test</div>
      </section>

      <section id="uncategorized.todo">
        <h3>TODO</h3>
        <div class="include-src"
          data-src="../core/tests/todo/alert-update.xml">Alert on @ready event
          [using update]</div>
        <div class="include-src"
          data-src="../core/tests/todo/button-component.xml">A simple button
          component implemented with updates</div>
        <div class="include-src"
          data-src="../core/tests/todo/button.xml">A simple button implemented
          with updates</div>
        <div class="include-src"
          data-src="../core/tests/todo/canvas.xml">Canvas</div>
        <div class="include-src"
          data-src="../core/tests/todo/component-include.xml">Including a
          component [using update]</div>
        <div class="include-src"
          data-src="../core/tests/todo/component-multiple.xml">Multiple
          components [using update]</div>
        <div class="include-src"
          data-src="../core/tests/todo/dom-event.xml">DOM event</div>
        <div class="include-src"
          data-src="../core/tests/todo/update-3.xml">Update on button press</div>
      </section>
    </sections>

    <section id="examples">
      <h2>List of Examples</h2>
      <ul id="examples.list">
      </ul>
    </sections>

    <script>
      build_toc(document.getElementById("toc"), document.body, 2);
      build_examples_list(document.getElementById("examples.list"));
      get_examples(1);
      link_elements("#elements.{0}");
    </script>

  </body>
</html>
