<component xmlns="http://bender.igel.co.jp" id="button">

  <property name="enabled-class" value="`enabled ? '' : 'disabled'"/>
  <property name="down" as="boolean" value="false"/>
  <property name="down-class" value="`down ? 'down' : ''"/>
  <property name="enabled" as="boolean" value="true"/>
  <event name="pushed"/>

  <view xmlns:html="http://www.w3.org/1999/xhtml">
    <html:style scoped="scoped">
      .button { display: inline-block; padding: 0.5em; border: solid thin black;
        cursor: pointer; }
      .button.disabled { background-color: #888; }
      .button.down { opacity: 0.5; }
    </html:style>
    <html:div id="div" class="button `enabled\-class `down\-class">
      <content>
        OK
      </content>
    </html:div>
  </view>

  <watch>
    <get select="@div" dom-event="mousedown" prevent-default="true"
      value="!flexo.fail(!`enabled)"/>
    <set property="down"/>
  </watch>

  <watch>
    <get select="$document" dom-event="mouseup"
      value="!flexo.fail(!`down &amp;&amp;
      ($in.target !== this.scope.div || !`enabled))"/>
    <set property="down" value="false"/>
    <set event="pushed">
      bender.trace("Pushed! %0 -> %1".fmt(this.id(), $in));
      return $in;
    </set>
  </watch>

</component>
