<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bender | Example | Properties | Chain graph</title>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="no-cache">
    <link rel="stylesheet" href="../example.css">
    <script src="../../flexo.js"></script>
    <script src="../../bender.js"></script>
  </head>
  <body>
    <p class="context"></p>
    <script src="../example.js"></script>
    <script>
"use strict";

var p = document.querySelector(".context");
var context = bender.create_context(p);
var main = context.appendChild(
  context.$("component",
    context.$("property", { name: "x", type: "number", value: 1 }),
    context.$("property", { name: "y", type: "number" }),
    context.$("property", { name: "z", type: "number" }),
    context.$("watch",
      context.$("get", { use: "$self", property: "x" }),
      context.$("set", { use: "$self", property: "y",
        value: "{{ {x} + 2 }}" })),
    context.$("watch",
      context.$("get", { use: "$self", property: "y" }),
      context.$("set", { use: "$self", property: "z",
        value: "{{ {y} * 3 + 1 }}" }))));
var use = context.appendChild(context.$("use"));
use._component = main;

/*flexo.listen(context.ownerDocument, "@refreshed", function (e) {
  if (e.instance.component === component) {
    setTimeout(function () {
      if (p.textContent === "x = 1, y = x + 1 = 2, z = x + y = 3, t = z * 2 = 6") {
        example.ok();
      }
    }, 0);
  }
});*/

    </script>
  </body>
</html>
