<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bender | Example | Watch | DOM event</title>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="no-cache">
    <link rel="stylesheet" href="../example.css">
    <script src="../../flexo.js"></script>
    <script src="../../bender.js"></script>
    <style>
      .button {
        display: inline-block;
        cursor: pointer;
        background-color: #ddd;
        padding: 0.5em;
        border-radius: 0.2em;
      }
    </style>
  </head>
  <body>
    <script src="../example.js"></script>
    <script>
(function () {
  "use strict";

  var context = bender.create_context();
  var component = context.appendChild(
    context.$("component", { id: "c" },
      context.$("view",
        context.$("html:div.button", "Click me")),
      context.$("watch",
        context.$("get", { view: "$root", event: "click" }))));
  context.appendChild(context.$("use", { href: "#c" }));
  flexo.listen(context.ownerDocument, "@refreshed", function (e) {
    console.log("Refreshed", e.instance);
    if (e.instance.component === component) {
      example.ok();
    }
  });

}());
    </script>
  </body>
</html>
